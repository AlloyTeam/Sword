{"version":3,"file":"sving.dev.js","sources":["../src/matrix2d.js","../src/obaa.js","../src/stage.js","../src/base-object.js","../src/Text.js","../src/sving.js","../src/sving.js"],"sourcesContent":["﻿\nfunction Matrix2D(a, b, c, d, tx, ty) {\n  this.setValues(a, b, c, d, tx, ty)\n}\n\nMatrix2D.DEG_TO_RAD = Math.PI / 180\n\n\nMatrix2D.identity = null // set at bottom of class definition.\nMatrix2D.prototype = {\n  setValues: function (a, b, c, d, tx, ty) {\n    // don't forget to update docs in the constructor if these change:\n    this.a = (a == null) ? 1 : a\n    this.b = b || 0\n    this.c = c || 0\n    this.d = (d == null) ? 1 : d\n    this.tx = tx || 0\n    this.ty = ty || 0\n    return this\n  },\n\n  append: function (a, b, c, d, tx, ty) {\n    var a1 = this.a\n    var b1 = this.b\n    var c1 = this.c\n    var d1 = this.d\n    if (a != 1 || b != 0 || c != 0 || d != 1) {\n      this.a = a1 * a + c1 * b\n      this.b = b1 * a + d1 * b\n      this.c = a1 * c + c1 * d\n      this.d = b1 * c + d1 * d\n    }\n    this.tx = a1 * tx + c1 * ty + this.tx\n    this.ty = b1 * tx + d1 * ty + this.ty\n    return this\n  },\n\n  appendTransform: function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    if (rotation % 360) {\n      var r = rotation * Matrix2D.DEG_TO_RAD\n      var cos = Math.cos(r)\n      var sin = Math.sin(r)\n    } else {\n      cos = 1\n      sin = 0\n    }\n\n    if (skewX || skewY) {\n      // TODO: can this be combined into a single append operation?\n      skewX *= Matrix2D.DEG_TO_RAD\n      skewY *= Matrix2D.DEG_TO_RAD\n      this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y)\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0)\n    } else {\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y)\n    }\n\n    if (regX || regY) {\n      this.tx -= regX * this.a + regY * this.c\n      this.ty -= regX * this.b + regY * this.d\n    }\n    return this\n  },\n\n  identity: function () {\n    this.a = this.d = 1\n    this.b = this.c = this.tx = this.ty = 0\n    return this\n  },\n\n  copy: function (matrix) {\n    return this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty)\n  },\n\n  clone: function () {\n    return new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty)\n  },\n\n  toString: function () {\n    return \"[Matrix2D (a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \")]\"\n  }\n}\n\n\nMatrix2D.identity = new Matrix2D()\n\n\nexport default Matrix2D\n","﻿/*\n * obaa 2.1.0\n * By dntzhang\n * Github: https://github.com/Tencent/omi/tree/master/packages/obaa\n * MIT Licensed.\n */\n\n\n// __r_: root\n// __c_: prop change callback\n// __p_: path\n\nfunction obaa(target, arr, callback) {\n\n  var eventPropArr = []\n  if (isArray(target)) {\n    if (target.length === 0) {\n      target.__o_ = {\n        __r_: target,\n        __p_: '#'\n      }\n    }\n    mock(target, target)\n  }\n  if (target && typeof target === 'object' && Object.keys(target).length === 0) {\n    track(target)\n    target.__o_.__r_ = target\n  }\n  for (var prop in target) {\n    if (target.hasOwnProperty(prop)) {\n      if (callback) {\n        if (isArray(arr) && isInArray(arr, prop)) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        } else if (isString(arr) && prop == arr) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        }\n      } else {\n        eventPropArr.push(prop)\n        watch(target, prop, null, target)\n      }\n    }\n  }\n  if (!target.__c_) {\n    target.__c_ = []\n  }\n  var propChanged = callback ? callback : arr\n  target.__c_.push({\n    all: !callback,\n    propChanged: propChanged,\n    eventPropArr: eventPropArr\n  })\n}\n\nvar triggerStr = [\n  'concat',\n  'copyWithin',\n  'fill',\n  'pop',\n  'push',\n  'reverse',\n  'shift',\n  'sort',\n  'splice',\n  'unshift',\n  'size'\n].join(',')\n\nvar methods = [\n  'concat',\n  'copyWithin',\n  'entries',\n  'every',\n  'fill',\n  'filter',\n  'find',\n  'findIndex',\n  'forEach',\n  'includes',\n  'indexOf',\n  'join',\n  'keys',\n  'lastIndexOf',\n  'map',\n  'pop',\n  'push',\n  'reduce',\n  'reduceRight',\n  'reverse',\n  'shift',\n  'slice',\n  'some',\n  'sort',\n  'splice',\n  'toLocaleString',\n  'toString',\n  'unshift',\n  'values',\n  'size'\n]\n\nfunction mock(target, root) {\n  methods.forEach(function (item) {\n    target[item] = function () {\n      var old = Array.prototype.slice.call(this, 0)\n      var result = Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n      if (new RegExp('\\\\b' + item + '\\\\b').test(triggerStr)) {\n        for (var cprop in this) {\n          if (\n            this.hasOwnProperty(cprop) &&\n            !isFunction(this[cprop])\n          ) {\n            watch(this, cprop, this.__o_.__p_, root)\n          }\n        }\n        //todo\n        onPropertyChanged(\n          'Array-' + item,\n          this,\n          old,\n          this,\n          this.__o_.__p_,\n          root\n        )\n      }\n      return result\n    }\n    target[\n      'pure' + item.substring(0, 1).toUpperCase() + item.substring(1)\n    ] = function () {\n      return Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n    }\n  })\n}\n\nfunction watch(target, prop, path, root) {\n  if (prop === '__o_') return\n  if (isFunction(target[prop])) return\n  if (!target.__o_) target.__o_ = {\n    __r_: root\n  }\n  if (path !== undefined && path !== null) {\n    target.__o_.__p_ = path\n  } else {\n    target.__o_.__p_ = '#'\n  }\n\n  var currentValue = (target.__o_[prop] = target[prop])\n  Object.defineProperty(target, prop, {\n    get: function () {\n      return this.__o_[prop]\n    },\n    set: function (value) {\n      var old = this.__o_[prop]\n      this.__o_[prop] = value\n      onPropertyChanged(\n        prop,\n        value,\n        old,\n        this,\n        target.__o_.__p_,\n        root\n      )\n    },\n    configurable: true,\n    enumerable: true\n  })\n  if (typeof currentValue == 'object') {\n    if (isArray(currentValue)) {\n      mock(currentValue, root)\n      if (currentValue.length === 0) {\n        track(currentValue, prop, path)\n      }\n    }\n    if (currentValue && Object.keys(currentValue).length === 0) {\n      track(currentValue, prop, path)\n    }\n    for (var cprop in currentValue) {\n      if (currentValue.hasOwnProperty(cprop)) {\n        watch(\n          currentValue,\n          cprop,\n          target.__o_.__p_ + '-' + prop,\n          root\n        )\n      }\n    }\n  }\n}\n\nfunction track(obj, prop, path) {\n  if (obj.__o_) {\n    return\n  }\n  obj.__o_ = {}\n  if (path !== undefined && path !== null) {\n    obj.__o_.__p_ = path + '-' + prop\n  } else {\n    if (prop !== undefined && prop !== null) {\n      obj.__o_.__p_ = '#' + '-' + prop\n    } else {\n      obj.__o_.__p_ = '#'\n    }\n  }\n}\n\n\nfunction onPropertyChanged(prop, value, oldValue, target, path, root) {\n  if (value !== oldValue && (!(nan(value) && nan(oldValue))) && root.__c_) {\n    var rootName = getRootName(prop, path)\n    for (\n      var i = 0, len = root.__c_.length;\n      i < len;\n      i++\n    ) {\n      var handler = root.__c_[i]\n      if (\n        handler.all ||\n        isInArray(handler.eventPropArr, rootName) ||\n        rootName.indexOf('Array-') === 0\n      ) {\n        handler.propChanged.call(target, prop, value, oldValue, path)\n      }\n    }\n  }\n\n  if (prop.indexOf('Array-') !== 0 && typeof value === 'object') {\n    watch(target, prop, target.__o_.__p_, root)\n  }\n}\n\nfunction isFunction(obj) {\n  return Object.prototype.toString.call(obj) == '[object Function]'\n}\n\nfunction nan(value) {\n  return typeof value === \"number\" && isNaN(value)\n}\n\nfunction isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nfunction isString(obj) {\n  return typeof obj === 'string'\n}\n\nfunction isInArray(arr, item) {\n  for (var i = arr.length; --i > -1;) {\n    if (item === arr[i]) return true\n  }\n  return false\n}\n\n\nfunction getRootName(prop, path) {\n  if (path === '#') {\n    return prop\n  }\n  return path.split('-')[1]\n}\n\nobaa.add = function (obj, prop) {\n  watch(obj, prop, obj.__o_.__p_, obj.__o_.__r_)\n}\n\nobaa.set = function (obj, prop, value) {\n  if (obj[prop] === undefined) {\n    watch(obj, prop, obj.__o_.__p_, obj.__o_.__r_)\n  }\n  obj[prop] = value\n}\n\nArray.prototype.size = function (length) {\n  this.length = length\n}\n\n\nexport default obaa\n","const svgNS = \"http://www.w3.org/2000/svg\"\n\nclass Stage {\n  constructor(selector, width, height) {\n    this.parent = typeof selector === \"string\" ? document.querySelector(selector) : selector\n    this.svg = document.createElementNS(svgNS, \"svg\")\n    //debug  'style', 'border: 1px solid black\n    //this.svg.setAttribute('style', 'border: 1px solid blackoverflow: hidden')\n\n    this.svg.setAttribute('width', width)\n    this.svg.setAttribute('height', height)\n    this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\n    this.parent.appendChild(this.svg)\n    this.children = []\n  }\n\n  add(child) {\n    this.children.push(child)\n    this.svg.append(child.ele)\n  }\n\n  //can't change z-index, use svg2 z-order ?\n  //https://stackoverflow.com/questions/17786618/how-to-use-z-index-in-svg-elements\n  swap(childA, childB) {\n\n    var cloneA = childA.ele.cloneNode(true)\n    var cloneB = childB.ele.cloneNode(true)\n\n    childB.ele.parentNode.replaceChild(cloneA, childB.ele)\n    childA.ele.parentNode.replaceChild(cloneB, childA.ele)\n\n  }\n}\n\n\nexport default Stage\n","import obaa from './obaa'\nimport Matrix2D from './matrix2d'\n\nconst svgNS = \"http://www.w3.org/2000/svg\"\nconst xlink = \"http://www.w3.org/1999/xlink\"\n\nclass BaseObject {\n  constructor() {\n    this.opacity = this.scaleX = this.scaleY = 1\n    this.left = this.top = this.rotation = this.skewX = this.skewY = this.originX = this.originY = 0\n\n    this.matrix = Matrix2D.identity\n\n    this.ele = null\n\n    obaa(this, [\"left\", \"top\", \"scaleX\", \"scaleY\", \"rotation\", \"skewX\", \"skewY\", \"originX\", \"originY\"], () => {\n\n      this.matrix.identity().appendTransform(this.left, this.top, this.scaleX, this.scaleY, this.rotation, this.skewX, this.skewY, this.originX, this.originY)\n\n      this.setAttrs({\n        \"transform\": \"matrix(\" + this.matrix.a + \",\" + this.matrix.b + \",\" + this.matrix.c + \",\" + this.matrix.d + \",\" + this.matrix.tx + \",\" + this.matrix.ty + \")\"\n      })\n    })\n\n    obaa(this, [\"opacity\"], () => {\n      this.setAttrs({ \"opacity\": this.opacity })\n    })\n\n  }\n\n  setAttrs(attrs) {\n    const el = this.ele\n    for (var key in attrs) {\n      if (attrs.hasOwnProperty(key)) {\n        if (key.substring(0, 6) == \"xlink:\") {\n          el.setAttributeNS(xlink, key.substring(6), String(attrs[key]))\n        } else {\n          el.setAttribute(key, String(attrs[key]))\n        }\n      }\n    }\n  }\n\n  getAttr(attr) {\n    if (attr.indexOf(\":\") !== -1) {\n      return this.getAttributeNS(svgNS, attr)\n    } else {\n      return this.getAttribute(attr)\n    }\n\n  }\n}\n\n\nexport default BaseObject\n","import BaseObject from './base-object'\n\nclass Text extends BaseObject {\n  constructor(textContent, font) {\n    super()\n    this.textContent = textContent\n    this.font = font\n\n    this.ele = document.createElementNS(\"http://www.w3.org/2000/svg\", 'text')\n\n    this.ele.style.font = font\n    this.ele.textContent = textContent\n  }\n}\n\n\nexport default Text\n","﻿import Matrix2D from './matrix2d'\nimport obaa from './obaa'\nimport Stage from './stage'\nimport Text from './Text'\n\nvar svgNS = \"http://www.w3.org/2000/svg\"\nvar xlink = \"http://www.w3.org/1999/xlink\"\nvar $ = function (el, attr) {\n  if (attr) {\n    if (typeof el == \"string\") {\n      el = $(el)\n    }\n    for (var key in attr) if (attr.hasOwnProperty(key)) {\n      if (key.substring(0, 6) == \"xlink:\") {\n        el.setAttributeNS(xlink, key.substring(6), String(attr[key]))\n      } else {\n        el.setAttribute(key, String(attr[key]))\n      }\n    }\n  } else {\n    el = document.createElementNS(\"http://www.w3.org/2000/svg\", el)\n    el.style && (el.style.webkitTapHighlightColor = \"rgba(0,0,0,0)\")\n    el.opacity = el.scaleX = el.scaleY = 1\n    el.left = el.top = el.rotation = el.skewX = el.skewY = el.originX = el.originY = 0\n    el.matrix = Matrix2D.identity\n    obaa(el, [\"left\", \"top\", \"scaleX\", \"scaleY\", \"rotation\", \"skewX\", \"skewY\", \"originX\", \"originY\"], function () {\n\n      this.matrix.identity().appendTransform(this.left, this.top, this.scaleX, this.scaleY, this.rotation, this.skewX, this.skewY, this.originX, this.originY)\n\n      $(el, { \"transform\": \"matrix(\" + this.matrix.a + \",\" + this.matrix.b + \",\" + this.matrix.c + \",\" + this.matrix.d + \",\" + this.matrix.tx + \",\" + this.matrix.ty + \")\" })\n    })\n\n    obaa(el, [\"opacity\"], function () {\n      el.setAttribute(\"opacity\", this.opacity)\n    })\n\n    el.attr = function (attr, value) {\n      if (arguments.length === 1) {\n        if (typeof attr === \"string\") {\n          if (attr.indexOf(\":\") !== -1) {\n            return this.getAttributeNS(svgNS, attr)\n          } else {\n            return this.getAttribute(attr)\n          }\n        } else {\n          return $(this, attr)\n        }\n      } else {\n        var obj = {}\n        obj[attr] = value\n        return $(this, obj)\n      }\n\n    }\n  }\n\n  return el\n}\n\nvar _Sving = function (selector, width, height) {\n  this.parent = typeof selector === \"string\" ? document.querySelector(selector) : selector\n  this.svg = document.createElementNS(svgNS, \"svg\")\n  //debug  'style', 'border: 1px solid black\n  this.svg.setAttribute('style', 'border: 1px solid blackoverflow: hidden')\n\n  this.svg.setAttribute('width', width)\n  this.svg.setAttribute('height', height)\n  this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\n  this.parent.appendChild(this.svg)\n\n}\n\n_Sving.prototype = {\n  line: function (x1, y1, x2, y2, color) {\n    var line = $(\"line\", { x1: x1, y1: y1, x2: x2, y2: y2 })\n    this.svg.appendChild(line)\n\n    return line\n  },\n  rect: function (width, height) {\n    var rect = $(\"rect\", { width: width, height: height })\n    this.svg.appendChild(rect)\n\n    return rect\n  },\n  text: function (str, font) {\n    var text = $(\"text\")\n    text.style.font = font\n    text.textContent = str\n    this.svg.appendChild(text)\n    return text\n  },\n  circle: function (r) {\n    var circle = $(\"circle\", { r: r })\n    this.svg.appendChild(circle)\n    return circle\n  },\n  //   image   group\n  path: function (d) {\n\n    var path = $(\"path\", { d: d })\n    path.to = _Sving.pathTo\n    this.svg.appendChild(path)\n    return path\n  },\n  ellipse: function (rx, ry) {\n\n    var ellipse = $(\"ellipse\", { rx: rx, ry: ry })\n    this.svg.appendChild(ellipse)\n    return ellipse\n  },\n  image: function (imgOrSrc) {\n    if (typeof imgOrSrc === \"string\") {\n      var image = $(\"image\", { \"xlink:href\": imgOrSrc })\n      var tempImage = new Image()\n      tempImage.onload = function () {\n        image.attr({ width: tempImage.width, height: tempImage.height })\n        tempImage = null\n      }\n      tempImage.src = imgOrSrc\n    } else {\n      var image = $(\"image\", { \"xlink:href\": imgOrSrc, width: imgOrSrc.width, height: imgOrSrc.height })\n\n    }\n    this.svg.appendChild(image)\n    return image\n\n\n  },\n  group: function () {\n    var group = $(\"g\")\n    this.svg.appendChild(group)\n    var i = 0, len = arguments.length\n    for (; i < len; i++) {\n      group.appendChild(arguments[i])\n    }\n    group.add = function (child) {\n      group.appendChild(child)\n    }\n    group.remove = function (child) {\n      group.removeChild(child)\n    }\n    return group\n  },\n  remove: function (child) {\n    this.svg.removeChild(child)\n  }\n}\n\nvar sving = function (selector, width, height) {\n\n  return new _Sving(selector, width, height)\n}\n\n\nsving.Stage = Stage\nsving.Text = Text\n\nexport default sving\n","\n\t\t\t\timport sving from './sving';\n\t\t\t\tif (typeof module!='undefined') module.exports = sving;\n\t\t\t\telse self.sving = sving;\n\t\t\t"],"names":["Matrix2D","a","b","c","d","tx","ty","setValues","DEG_TO_RAD","Math","PI","identity","prototype","append","a1","b1","c1","d1","appendTransform","x","y","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","copy","matrix","clone","toString","obaa","target","arr","callback","eventPropArr","isArray","length","__o_","__r_","__p_","mock","Object","keys","track","prop","hasOwnProperty","isInArray","push","watch","isString","__c_","propChanged","all","triggerStr","join","methods","root","forEach","item","old","Array","slice","call","result","apply","arguments","RegExp","test","cprop","isFunction","onPropertyChanged","substring","toUpperCase","path","undefined","currentValue","defineProperty","get","set","value","configurable","enumerable","obj","oldValue","nan","rootName","getRootName","i","len","handler","indexOf","isNaN","split","add","size","svgNS","Stage","selector","width","height","parent","document","querySelector","svg","createElementNS","setAttribute","setAttributeNS","appendChild","children","child","ele","swap","childA","childB","cloneA","cloneNode","cloneB","parentNode","replaceChild","xlink","BaseObject","opacity","left","top","originX","originY","setAttrs","attrs","el","key","String","getAttr","attr","getAttributeNS","getAttribute","Text","textContent","font","style","$","webkitTapHighlightColor","_Sving","line","x1","y1","x2","y2","color","rect","text","str","circle","to","pathTo","ellipse","rx","ry","image","imgOrSrc","tempImage","Image","onload","src","group","remove","removeChild","sving","module","exports","self"],"mappings":"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"}