{"version":3,"file":"sving.dev.js","sources":["../src/matrix2d.js","../src/observe.js","../src/sving.js","../src/sving.js"],"sourcesContent":["﻿\nfunction Matrix2D(a, b, c, d, tx, ty) {\n  this.setValues(a, b, c, d, tx, ty)\n}\n\nMatrix2D.DEG_TO_RAD = Math.PI / 180\n\n\nMatrix2D.identity = null // set at bottom of class definition.\nMatrix2D.prototype = {\n  setValues: function (a, b, c, d, tx, ty) {\n    // don't forget to update docs in the constructor if these change:\n    this.a = (a == null) ? 1 : a\n    this.b = b || 0\n    this.c = c || 0\n    this.d = (d == null) ? 1 : d\n    this.tx = tx || 0\n    this.ty = ty || 0\n    return this\n  },\n\n  append: function (a, b, c, d, tx, ty) {\n    var a1 = this.a\n    var b1 = this.b\n    var c1 = this.c\n    var d1 = this.d\n    if (a != 1 || b != 0 || c != 0 || d != 1) {\n      this.a = a1 * a + c1 * b\n      this.b = b1 * a + d1 * b\n      this.c = a1 * c + c1 * d\n      this.d = b1 * c + d1 * d\n    }\n    this.tx = a1 * tx + c1 * ty + this.tx\n    this.ty = b1 * tx + d1 * ty + this.ty\n    return this\n  },\n\n  appendTransform: function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    if (rotation % 360) {\n      var r = rotation * Matrix2D.DEG_TO_RAD\n      var cos = Math.cos(r)\n      var sin = Math.sin(r)\n    } else {\n      cos = 1\n      sin = 0\n    }\n\n    if (skewX || skewY) {\n      // TODO: can this be combined into a single append operation?\n      skewX *= Matrix2D.DEG_TO_RAD\n      skewY *= Matrix2D.DEG_TO_RAD\n      this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y)\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0)\n    } else {\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y)\n    }\n\n    if (regX || regY) {\n      this.tx -= regX * this.a + regY * this.c\n      this.ty -= regX * this.b + regY * this.d\n    }\n    return this\n  },\n\n  identity: function () {\n    this.a = this.d = 1\n    this.b = this.c = this.tx = this.ty = 0\n    return this\n  },\n\n  copy: function (matrix) {\n    return this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty)\n  },\n\n  clone: function () {\n    return new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty)\n  },\n\n  toString: function () {\n    return \"[Matrix2D (a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \")]\"\n  }\n}\n\n\nMatrix2D.identity = new Matrix2D()\n\n\nexport default Matrix2D\n","﻿/* observejs --- By dnt http://kmdjs.github.io/\n * Github: https://github.com/kmdjs/observejs\n * MIT Licensed.\n */\n\nvar observe = function (target, arr, callback) {\n  var _observe = function (target, arr, callback) {\n    if (!target.$observer) target.$observer = this;\n    var $observer = target.$observer;\n    var eventPropArr = [];\n    if (observe.isArray(target)) {\n      if (target.length === 0) {\n        target.$observeProps = {};\n        target.$observeProps.$observerPath = \"#\";\n      }\n      $observer.mock(target);\n\n    }\n    for (var prop in target) {\n      if (target.hasOwnProperty(prop)) {\n        if (callback) {\n          if (observe.isArray(arr) && observe.isInArray(arr, prop)) {\n            eventPropArr.push(prop);\n            $observer.watch(target, prop);\n          } else if (observe.isString(arr) && prop == arr) {\n            eventPropArr.push(prop);\n            $observer.watch(target, prop);\n          }\n        } else {\n          eventPropArr.push(prop);\n          $observer.watch(target, prop);\n        }\n      }\n    }\n    $observer.target = target;\n    if (!$observer.propertyChangedHandler) $observer.propertyChangedHandler = [];\n    var propChanged = callback ? callback : arr;\n    $observer.propertyChangedHandler.push({ all: !callback, propChanged: propChanged, eventPropArr: eventPropArr });\n  }\n  _observe.prototype = {\n    \"onPropertyChanged\": function (prop, value, oldValue, target, path) {\n      if (value !== oldValue && this.propertyChangedHandler) {\n        var rootName = observe._getRootName(prop, path);\n        for (var i = 0, len = this.propertyChangedHandler.length; i < len; i++) {\n          var handler = this.propertyChangedHandler[i];\n          if (handler.all || observe.isInArray(handler.eventPropArr, rootName) || rootName.indexOf(\"Array-\") === 0) {\n            handler.propChanged.call(this.target, prop, value, oldValue, path);\n          }\n        }\n      }\n      if (prop.indexOf(\"Array-\") !== 0 && typeof value === \"object\") {\n        this.watch(target, prop, target.$observeProps.$observerPath);\n      }\n    },\n    \"mock\": function (target) {\n      var self = this;\n      observe.methods.forEach(function (item) {\n        target[item] = function () {\n          var old = Array.prototype.slice.call(this, 0);\n          var result = Array.prototype[item].apply(this, Array.prototype.slice.call(arguments));\n          if (new RegExp(\"\\\\b\" + item + \"\\\\b\").test(observe.triggerStr)) {\n            for (var cprop in this) {\n              if (this.hasOwnProperty(cprop) && !observe.isFunction(this[cprop])) {\n                self.watch(this, cprop, this.$observeProps.$observerPath);\n              }\n            }\n            //todo\n            self.onPropertyChanged(\"Array-\" + item, this, old, this, this.$observeProps.$observerPath);\n          }\n          return result;\n        };\n      });\n    },\n    \"watch\": function (target, prop, path) {\n      if (prop === \"$observeProps\" || prop === \"$observer\") return;\n      if (observe.isFunction(target[prop])) return;\n      if (!target.$observeProps) target.$observeProps = {};\n      if (path !== undefined) {\n        target.$observeProps.$observerPath = path;\n      } else {\n        target.$observeProps.$observerPath = \"#\";\n      }\n      var self = this;\n      var currentValue = target.$observeProps[prop] = target[prop];\n      Object.defineProperty(target, prop, {\n        get: function () {\n          return this.$observeProps[prop];\n        },\n        set: function (value) {\n          var old = this.$observeProps[prop];\n          this.$observeProps[prop] = value;\n          self.onPropertyChanged(prop, value, old, this, target.$observeProps.$observerPath);\n        }\n      });\n      if (typeof currentValue == \"object\") {\n        if (observe.isArray(currentValue)) {\n          this.mock(currentValue);\n          if (currentValue.length === 0) {\n            if (!currentValue.$observeProps) currentValue.$observeProps = {};\n            if (path !== undefined) {\n              currentValue.$observeProps.$observerPath = path;\n            } else {\n              currentValue.$observeProps.$observerPath = \"#\";\n            }\n          }\n        }\n        for (var cprop in currentValue) {\n          if (currentValue.hasOwnProperty(cprop)) {\n            this.watch(currentValue, cprop, target.$observeProps.$observerPath + \"-\" + prop);\n          }\n        }\n      }\n    }\n  }\n  return new _observe(target, arr, callback)\n}\nobserve.methods = [\"concat\", \"every\", \"filter\", \"forEach\", \"indexOf\", \"join\", \"lastIndexOf\", \"map\", \"pop\", \"push\", \"reduce\", \"reduceRight\", \"reverse\", \"shift\", \"slice\", \"some\", \"sort\", \"splice\", \"unshift\", \"toLocaleString\", \"toString\", \"size\"]\nobserve.triggerStr = [\"concat\", \"pop\", \"push\", \"reverse\", \"shift\", \"sort\", \"splice\", \"unshift\", \"size\"].join(\",\")\nobserve.isArray = function (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\nobserve.isString = function (obj) {\n  return typeof obj === \"string\";\n}\nobserve.isInArray = function (arr, item) {\n  for (var i = arr.length; --i > -1;) {\n    if (item === arr[i]) return true;\n  }\n  return false;\n}\nobserve.isFunction = function (obj) {\n  return Object.prototype.toString.call(obj) == '[object Function]';\n}\nobserve.twoWay = function (objA, aProp, objB, bProp) {\n  if (typeof objA[aProp] === \"object\" && typeof objB[bProp] === \"object\") {\n    observe(objA, aProp, function (name, value) {\n      objB[bProp] = this[aProp];\n    })\n    observe(objB, bProp, function (name, value) {\n      objA[aProp] = this[bProp];\n    })\n  } else {\n    observe(objA, aProp, function (name, value) {\n      objB[bProp] = value;\n    })\n    observe(objB, bProp, function (name, value) {\n      objA[aProp] = value;\n    })\n  }\n}\nobserve._getRootName = function (prop, path) {\n  if (path === \"#\") {\n    return prop;\n  }\n  return path.split(\"-\")[1];\n}\n\nobserve.add = function (obj, prop, value) {\n  obj[prop] = value;\n  var $observer = obj.$observer;\n  $observer.watch(obj, prop);\n}\nArray.prototype.size = function (length) {\n  this.length = length;\n}\n\n\nexport default observe\n","﻿import Matrix2D from './matrix2d'\nimport observe from './observe'\n\nvar svgNS = \"http://www.w3.org/2000/svg\"\nvar xlink = \"http://www.w3.org/1999/xlink\"\nvar $ = function (el, attr) {\n  if (attr) {\n    if (typeof el == \"string\") {\n      el = $(el)\n    }\n    for (var key in attr) if (attr.hasOwnProperty(key)) {\n      if (key.substring(0, 6) == \"xlink:\") {\n        el.setAttributeNS(xlink, key.substring(6), String(attr[key]))\n      } else {\n        el.setAttribute(key, String(attr[key]))\n      }\n    }\n  } else {\n    el = document.createElementNS(\"http://www.w3.org/2000/svg\", el)\n    el.style && (el.style.webkitTapHighlightColor = \"rgba(0,0,0,0)\")\n    el.opacity = el.scaleX = el.scaleY = 1\n    el.left = el.top = el.rotation = el.skewX = el.skewY = el.originX = el.originY = 0\n    el.matrix = Matrix2D.identity\n    observe(el, [\"left\", \"top\", \"scaleX\", \"scaleY\", \"rotation\", \"skewX\", \"skewY\", \"originX\", \"originY\"], function () {\n\n      this.matrix.identity().appendTransform(this.left, this.top, this.scaleX, this.scaleY, this.rotation, this.skewX, this.skewY, this.originX, this.originY)\n\n      $(el, { \"transform\": \"matrix(\" + this.matrix.a + \",\" + this.matrix.b + \",\" + this.matrix.c + \",\" + this.matrix.d + \",\" + this.matrix.tx + \",\" + this.matrix.ty + \")\" })\n    })\n\n    observe(el, [\"opacity\"], function () {\n      el.setAttribute(\"opacity\", this.opacity)\n    })\n\n    el.attr = function (attr, value) {\n      if (arguments.length === 1) {\n        if (typeof attr === \"string\") {\n          if (attr.indexOf(\":\") !== -1) {\n            return this.getAttributeNS(svgNS, attr)\n          } else {\n            return this.getAttribute(attr)\n          }\n        } else {\n          return $(this, attr)\n        }\n      } else {\n        var obj = {}\n        obj[attr] = value\n        return $(this, obj)\n      }\n\n    }\n  }\n\n  return el\n}\n\nvar _Sving = function (selector, width, height) {\n  this.parent = typeof selector === \"string\" ? document.querySelector(selector) : selector\n  this.svg = document.createElementNS(svgNS, \"svg\")\n  //debug  'style', 'border: 1px solid black\n  this.svg.setAttribute('style', 'border: 1px solid blackoverflow: hidden')\n\n  this.svg.setAttribute('width', width)\n  this.svg.setAttribute('height', height)\n  this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\n  this.parent.appendChild(this.svg)\n\n}\n\n_Sving.prototype = {\n  line: function (x1, y1, x2, y2, color) {\n    var line = $(\"line\", { x1: x1, y1: y1, x2: x2, y2: y2 })\n    this.svg.appendChild(line)\n\n    return line\n  },\n  rect: function (width, height) {\n    var rect = $(\"rect\", { width: width, height: height })\n    this.svg.appendChild(rect)\n\n    return rect\n  },\n  text: function (str, font) {\n    var text = $(\"text\")\n    text.style.font = font\n    text.textContent = str\n    this.svg.appendChild(text)\n    return text\n  },\n  circle: function (r) {\n    var circle = $(\"circle\", { r: r })\n    this.svg.appendChild(circle)\n    return circle\n  },\n  //   image   group\n  path: function (d) {\n\n    var path = $(\"path\", { d: d })\n    path.to = _Sving.pathTo\n    this.svg.appendChild(path)\n    return path\n  },\n  ellipse: function (rx, ry) {\n\n    var ellipse = $(\"ellipse\", { rx: rx, ry: ry })\n    this.svg.appendChild(ellipse)\n    return ellipse\n  },\n  image: function (imgOrSrc) {\n    if (typeof imgOrSrc === \"string\") {\n      var image = $(\"image\", { \"xlink:href\": imgOrSrc })\n      var tempImage = new Image()\n      tempImage.onload = function () {\n        image.attr({ width: tempImage.width, height: tempImage.height })\n        tempImage = null\n      }\n      tempImage.src = imgOrSrc\n    } else {\n      var image = $(\"image\", { \"xlink:href\": imgOrSrc, width: imgOrSrc.width, height: imgOrSrc.height })\n\n    }\n    this.svg.appendChild(image)\n    return image\n\n\n  },\n  group: function () {\n    var group = $(\"g\")\n    this.svg.appendChild(group)\n    var i = 0, len = arguments.length\n    for (; i < len; i++) {\n      group.appendChild(arguments[i])\n    }\n    group.add = function (child) {\n      group.appendChild(child)\n    }\n    group.remove = function (child) {\n      group.removeChild(child)\n    }\n    return group\n  },\n  remove: function (child) {\n    this.svg.removeChild(child)\n  }\n}\n\nvar Sving = function (selector, width, height) {\n\n  return new _Sving(selector, width, height)\n}\n\nwindow.Sving = Sving\n\nexport default Sving\n","\n\t\t\t\timport sving from './sving';\n\t\t\t\tif (typeof module!='undefined') module.exports = sving;\n\t\t\t\telse self.sving = sving;\n\t\t\t"],"names":["Matrix2D","a","b","c","d","tx","ty","setValues","DEG_TO_RAD","Math","PI","identity","prototype","append","a1","b1","c1","d1","appendTransform","x","y","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","copy","matrix","clone","toString","observe","target","arr","callback","_observe","$observer","eventPropArr","isArray","length","$observeProps","$observerPath","mock","prop","hasOwnProperty","isInArray","push","watch","isString","propertyChangedHandler","propChanged","all","value","oldValue","path","rootName","_getRootName","i","len","handler","indexOf","call","self","methods","forEach","item","old","Array","slice","result","apply","arguments","RegExp","test","triggerStr","cprop","isFunction","onPropertyChanged","undefined","currentValue","Object","defineProperty","get","set","join","obj","twoWay","objA","aProp","objB","bProp","name","split","add","size","svgNS","xlink","$","el","attr","key","substring","setAttributeNS","String","setAttribute","document","createElementNS","style","webkitTapHighlightColor","opacity","left","top","originX","originY","getAttributeNS","getAttribute","_Sving","selector","width","height","parent","querySelector","svg","appendChild","line","x1","y1","x2","y2","color","rect","text","str","font","textContent","circle","to","pathTo","ellipse","rx","ry","image","imgOrSrc","tempImage","Image","onload","src","group","child","remove","removeChild","Sving","window","module","exports","sving"],"mappings":"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"}