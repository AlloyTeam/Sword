{"version":3,"sources":["../src/matrix2d.js","../src/obaa.js","../src/stage.js","../src/base-object.js","../src/Text.js","../src/sving.js"],"names":["Matrix2D","a","b","c","d","tx","ty","this","setValues","obaa","target","arr","callback","eventPropArr","isArray","length","__o_","__r_","__p_","mock","Object","keys","track","prop","hasOwnProperty","isInArray","push","watch","isString","__c_","propChanged","all","root","methods","forEach","item","old","Array","prototype","slice","call","result","apply","arguments","RegExp","test","triggerStr","cprop","isFunction","onPropertyChanged","substring","toUpperCase","path","undefined","currentValue","defineProperty","get","set","value","configurable","enumerable","obj","oldValue","nan","rootName","getRootName","i","len","handler","indexOf","toString","isNaN","split","DEG_TO_RAD","Math","PI","identity","append","a1","b1","c1","d1","appendTransform","x","y","scaleX","scaleY","rotation","skewX","skewY","regX","regY","r","cos","sin","copy","matrix","clone","join","add","size","svgNS","Stage","selector","width","height","_classCallCheck","parent","document","querySelector","svg","createElementNS","setAttribute","setAttributeNS","appendChild","children","child","ele","BaseObject","_this","_classCallCheck$1","opacity","originX","originY","left","top","setAttrs","transform","attrs","el","key","String","getAttr","attr","getAttributeNS","getAttribute","Text","textContent","font","_classCallCheck$2","_possibleConstructorReturn","_BaseObject","style","$","webkitTapHighlightColor","_Sving","line","x1","y1","x2","y2","color","rect","text","str","circle","to","pathTo","ellipse","rx","ry","image","imgOrSrc","xlink:href","tempImage","Image","onload","src","group","remove","removeChild","sving","module","exports","self"],"mappings":"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","file":"sving.js","sourcesContent":["﻿\nfunction Matrix2D(a, b, c, d, tx, ty) {\n  this.setValues(a, b, c, d, tx, ty)\n}\n\nMatrix2D.DEG_TO_RAD = Math.PI / 180\n\n\nMatrix2D.identity = null // set at bottom of class definition.\nMatrix2D.prototype = {\n  setValues: function (a, b, c, d, tx, ty) {\n    // don't forget to update docs in the constructor if these change:\n    this.a = (a == null) ? 1 : a\n    this.b = b || 0\n    this.c = c || 0\n    this.d = (d == null) ? 1 : d\n    this.tx = tx || 0\n    this.ty = ty || 0\n    return this\n  },\n\n  append: function (a, b, c, d, tx, ty) {\n    var a1 = this.a\n    var b1 = this.b\n    var c1 = this.c\n    var d1 = this.d\n    if (a != 1 || b != 0 || c != 0 || d != 1) {\n      this.a = a1 * a + c1 * b\n      this.b = b1 * a + d1 * b\n      this.c = a1 * c + c1 * d\n      this.d = b1 * c + d1 * d\n    }\n    this.tx = a1 * tx + c1 * ty + this.tx\n    this.ty = b1 * tx + d1 * ty + this.ty\n    return this\n  },\n\n  appendTransform: function (x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n    if (rotation % 360) {\n      var r = rotation * Matrix2D.DEG_TO_RAD\n      var cos = Math.cos(r)\n      var sin = Math.sin(r)\n    } else {\n      cos = 1\n      sin = 0\n    }\n\n    if (skewX || skewY) {\n      // TODO: can this be combined into a single append operation?\n      skewX *= Matrix2D.DEG_TO_RAD\n      skewY *= Matrix2D.DEG_TO_RAD\n      this.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y)\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, 0, 0)\n    } else {\n      this.append(cos * scaleX, sin * scaleX, -sin * scaleY, cos * scaleY, x, y)\n    }\n\n    if (regX || regY) {\n      this.tx -= regX * this.a + regY * this.c\n      this.ty -= regX * this.b + regY * this.d\n    }\n    return this\n  },\n\n  identity: function () {\n    this.a = this.d = 1\n    this.b = this.c = this.tx = this.ty = 0\n    return this\n  },\n\n  copy: function (matrix) {\n    return this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty)\n  },\n\n  clone: function () {\n    return new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty)\n  },\n\n  toString: function () {\n    return \"[Matrix2D (a=\" + this.a + \" b=\" + this.b + \" c=\" + this.c + \" d=\" + this.d + \" tx=\" + this.tx + \" ty=\" + this.ty + \")]\"\n  }\n}\n\n\nMatrix2D.identity = new Matrix2D()\n\n\nexport default Matrix2D\n","﻿/*\n * obaa 2.1.0\n * By dntzhang\n * Github: https://github.com/Tencent/omi/tree/master/packages/obaa\n * MIT Licensed.\n */\n\n\n// __r_: root\n// __c_: prop change callback\n// __p_: path\n\nfunction obaa(target, arr, callback) {\n\n  var eventPropArr = []\n  if (isArray(target)) {\n    if (target.length === 0) {\n      target.__o_ = {\n        __r_: target,\n        __p_: '#'\n      }\n    }\n    mock(target, target)\n  }\n  if (target && typeof target === 'object' && Object.keys(target).length === 0) {\n    track(target)\n    target.__o_.__r_ = target\n  }\n  for (var prop in target) {\n    if (target.hasOwnProperty(prop)) {\n      if (callback) {\n        if (isArray(arr) && isInArray(arr, prop)) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        } else if (isString(arr) && prop == arr) {\n          eventPropArr.push(prop)\n          watch(target, prop, null, target)\n        }\n      } else {\n        eventPropArr.push(prop)\n        watch(target, prop, null, target)\n      }\n    }\n  }\n  if (!target.__c_) {\n    target.__c_ = []\n  }\n  var propChanged = callback ? callback : arr\n  target.__c_.push({\n    all: !callback,\n    propChanged: propChanged,\n    eventPropArr: eventPropArr\n  })\n}\n\nvar triggerStr = [\n  'concat',\n  'copyWithin',\n  'fill',\n  'pop',\n  'push',\n  'reverse',\n  'shift',\n  'sort',\n  'splice',\n  'unshift',\n  'size'\n].join(',')\n\nvar methods = [\n  'concat',\n  'copyWithin',\n  'entries',\n  'every',\n  'fill',\n  'filter',\n  'find',\n  'findIndex',\n  'forEach',\n  'includes',\n  'indexOf',\n  'join',\n  'keys',\n  'lastIndexOf',\n  'map',\n  'pop',\n  'push',\n  'reduce',\n  'reduceRight',\n  'reverse',\n  'shift',\n  'slice',\n  'some',\n  'sort',\n  'splice',\n  'toLocaleString',\n  'toString',\n  'unshift',\n  'values',\n  'size'\n]\n\nfunction mock(target, root) {\n  methods.forEach(function (item) {\n    target[item] = function () {\n      var old = Array.prototype.slice.call(this, 0)\n      var result = Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n      if (new RegExp('\\\\b' + item + '\\\\b').test(triggerStr)) {\n        for (var cprop in this) {\n          if (\n            this.hasOwnProperty(cprop) &&\n            !isFunction(this[cprop])\n          ) {\n            watch(this, cprop, this.__o_.__p_, root)\n          }\n        }\n        //todo\n        onPropertyChanged(\n          'Array-' + item,\n          this,\n          old,\n          this,\n          this.__o_.__p_,\n          root\n        )\n      }\n      return result\n    }\n    target[\n      'pure' + item.substring(0, 1).toUpperCase() + item.substring(1)\n    ] = function () {\n      return Array.prototype[item].apply(\n        this,\n        Array.prototype.slice.call(arguments)\n      )\n    }\n  })\n}\n\nfunction watch(target, prop, path, root) {\n  if (prop === '__o_') return\n  if (isFunction(target[prop])) return\n  if (!target.__o_) target.__o_ = {\n    __r_: root\n  }\n  if (path !== undefined && path !== null) {\n    target.__o_.__p_ = path\n  } else {\n    target.__o_.__p_ = '#'\n  }\n\n  var currentValue = (target.__o_[prop] = target[prop])\n  Object.defineProperty(target, prop, {\n    get: function () {\n      return this.__o_[prop]\n    },\n    set: function (value) {\n      var old = this.__o_[prop]\n      this.__o_[prop] = value\n      onPropertyChanged(\n        prop,\n        value,\n        old,\n        this,\n        target.__o_.__p_,\n        root\n      )\n    },\n    configurable: true,\n    enumerable: true\n  })\n  if (typeof currentValue == 'object') {\n    if (isArray(currentValue)) {\n      mock(currentValue, root)\n      if (currentValue.length === 0) {\n        track(currentValue, prop, path)\n      }\n    }\n    if (currentValue && Object.keys(currentValue).length === 0) {\n      track(currentValue, prop, path)\n    }\n    for (var cprop in currentValue) {\n      if (currentValue.hasOwnProperty(cprop)) {\n        watch(\n          currentValue,\n          cprop,\n          target.__o_.__p_ + '-' + prop,\n          root\n        )\n      }\n    }\n  }\n}\n\nfunction track(obj, prop, path) {\n  if (obj.__o_) {\n    return\n  }\n  obj.__o_ = {}\n  if (path !== undefined && path !== null) {\n    obj.__o_.__p_ = path + '-' + prop\n  } else {\n    if (prop !== undefined && prop !== null) {\n      obj.__o_.__p_ = '#' + '-' + prop\n    } else {\n      obj.__o_.__p_ = '#'\n    }\n  }\n}\n\n\nfunction onPropertyChanged(prop, value, oldValue, target, path, root) {\n  if (value !== oldValue && (!(nan(value) && nan(oldValue))) && root.__c_) {\n    var rootName = getRootName(prop, path)\n    for (\n      var i = 0, len = root.__c_.length;\n      i < len;\n      i++\n    ) {\n      var handler = root.__c_[i]\n      if (\n        handler.all ||\n        isInArray(handler.eventPropArr, rootName) ||\n        rootName.indexOf('Array-') === 0\n      ) {\n        handler.propChanged.call(target, prop, value, oldValue, path)\n      }\n    }\n  }\n\n  if (prop.indexOf('Array-') !== 0 && typeof value === 'object') {\n    watch(target, prop, target.__o_.__p_, root)\n  }\n}\n\nfunction isFunction(obj) {\n  return Object.prototype.toString.call(obj) == '[object Function]'\n}\n\nfunction nan(value) {\n  return typeof value === \"number\" && isNaN(value)\n}\n\nfunction isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nfunction isString(obj) {\n  return typeof obj === 'string'\n}\n\nfunction isInArray(arr, item) {\n  for (var i = arr.length; --i > -1;) {\n    if (item === arr[i]) return true\n  }\n  return false\n}\n\n\nfunction getRootName(prop, path) {\n  if (path === '#') {\n    return prop\n  }\n  return path.split('-')[1]\n}\n\nobaa.add = function (obj, prop) {\n  watch(obj, prop, obj.__o_.__p_, obj.__o_.__r_)\n}\n\nobaa.set = function (obj, prop, value) {\n  if (obj[prop] === undefined) {\n    watch(obj, prop, obj.__o_.__p_, obj.__o_.__r_)\n  }\n  obj[prop] = value\n}\n\nArray.prototype.size = function (length) {\n  this.length = length\n}\n\n\nexport default obaa\n","const svgNS = \"http://www.w3.org/2000/svg\"\n\nclass Stage {\n  constructor(selector, width, height) {\n    this.parent = typeof selector === \"string\" ? document.querySelector(selector) : selector\n    this.svg = document.createElementNS(svgNS, \"svg\")\n    //debug  'style', 'border: 1px solid black\n    //this.svg.setAttribute('style', 'border: 1px solid blackoverflow: hidden')\n\n    this.svg.setAttribute('width', width)\n    this.svg.setAttribute('height', height)\n    this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\n    this.parent.appendChild(this.svg)\n    this.children = []\n  }\n\n  add(child) {\n    this.children.push(child)\n    this.svg.append(child.ele)\n  }\n}\n\n\nexport default Stage\n","import obaa from './obaa'\nimport Matrix2D from './matrix2d'\n\nconst svgNS = \"http://www.w3.org/2000/svg\"\nconst xlink = \"http://www.w3.org/1999/xlink\"\n\nclass BaseObject {\n  constructor() {\n    this.opacity = this.scaleX = this.scaleY = 1\n    this.tx = this.ty = this.rotation = this.skewX = this.skewY = this.originX = this.originY = 0\n\n    this.matrix = Matrix2D.identity\n\n    this.ele = null\n\n    obaa(this, [\"left\", \"top\", \"scaleX\", \"scaleY\", \"rotation\", \"skewX\", \"skewY\", \"originX\", \"originY\"], () => {\n\n      this.matrix.identity().appendTransform(this.left, this.top, this.scaleX, this.scaleY, this.rotation, this.skewX, this.skewY, this.originX, this.originY)\n\n      this.setAttrs({\n        \"transform\": \"matrix(\" + this.matrix.a + \",\" + this.matrix.b + \",\" + this.matrix.c + \",\" + this.matrix.d + \",\" + this.matrix.tx + \",\" + this.matrix.ty + \")\"\n      })\n    })\n\n    obaa(this, [\"opacity\"], () => {\n      this.setAttrs({ \"opacity\": this.opacity })\n    })\n\n  }\n\n  setAttrs(attrs) {\n    const el = this.ele\n    for (var key in attrs) {\n      if (attrs.hasOwnProperty(key)) {\n        if (key.substring(0, 6) == \"xlink:\") {\n          el.setAttributeNS(xlink, key.substring(6), String(attrs[key]))\n        } else {\n          el.setAttribute(key, String(attrs[key]))\n        }\n      }\n    }\n  }\n\n  getAttr(attr) {\n    if (attr.indexOf(\":\") !== -1) {\n      return this.getAttributeNS(svgNS, attr)\n    } else {\n      return this.getAttribute(attr)\n    }\n\n  }\n}\n\n\nexport default BaseObject\n","import BaseObject from './base-object'\n\nclass Text extends BaseObject {\n  constructor(textContent, font) {\n    super()\n    this.textContent = textContent\n    this.font = font\n\n    this.ele = document.createElementNS(\"http://www.w3.org/2000/svg\", 'text')\n\n    this.ele.style.font = font\n    this.ele.textContent = textContent\n  }\n}\n\n\nexport default Text\n","﻿import Matrix2D from './matrix2d'\nimport obaa from './obaa'\nimport Stage from './stage'\nimport Text from './Text'\n\nvar svgNS = \"http://www.w3.org/2000/svg\"\nvar xlink = \"http://www.w3.org/1999/xlink\"\nvar $ = function (el, attr) {\n  if (attr) {\n    if (typeof el == \"string\") {\n      el = $(el)\n    }\n    for (var key in attr) if (attr.hasOwnProperty(key)) {\n      if (key.substring(0, 6) == \"xlink:\") {\n        el.setAttributeNS(xlink, key.substring(6), String(attr[key]))\n      } else {\n        el.setAttribute(key, String(attr[key]))\n      }\n    }\n  } else {\n    el = document.createElementNS(\"http://www.w3.org/2000/svg\", el)\n    el.style && (el.style.webkitTapHighlightColor = \"rgba(0,0,0,0)\")\n    el.opacity = el.scaleX = el.scaleY = 1\n    el.left = el.top = el.rotation = el.skewX = el.skewY = el.originX = el.originY = 0\n    el.matrix = Matrix2D.identity\n    obaa(el, [\"left\", \"top\", \"scaleX\", \"scaleY\", \"rotation\", \"skewX\", \"skewY\", \"originX\", \"originY\"], function () {\n\n      this.matrix.identity().appendTransform(this.left, this.top, this.scaleX, this.scaleY, this.rotation, this.skewX, this.skewY, this.originX, this.originY)\n\n      $(el, { \"transform\": \"matrix(\" + this.matrix.a + \",\" + this.matrix.b + \",\" + this.matrix.c + \",\" + this.matrix.d + \",\" + this.matrix.tx + \",\" + this.matrix.ty + \")\" })\n    })\n\n    obaa(el, [\"opacity\"], function () {\n      el.setAttribute(\"opacity\", this.opacity)\n    })\n\n    el.attr = function (attr, value) {\n      if (arguments.length === 1) {\n        if (typeof attr === \"string\") {\n          if (attr.indexOf(\":\") !== -1) {\n            return this.getAttributeNS(svgNS, attr)\n          } else {\n            return this.getAttribute(attr)\n          }\n        } else {\n          return $(this, attr)\n        }\n      } else {\n        var obj = {}\n        obj[attr] = value\n        return $(this, obj)\n      }\n\n    }\n  }\n\n  return el\n}\n\nvar _Sving = function (selector, width, height) {\n  this.parent = typeof selector === \"string\" ? document.querySelector(selector) : selector\n  this.svg = document.createElementNS(svgNS, \"svg\")\n  //debug  'style', 'border: 1px solid black\n  this.svg.setAttribute('style', 'border: 1px solid blackoverflow: hidden')\n\n  this.svg.setAttribute('width', width)\n  this.svg.setAttribute('height', height)\n  this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\")\n  this.parent.appendChild(this.svg)\n\n}\n\n_Sving.prototype = {\n  line: function (x1, y1, x2, y2, color) {\n    var line = $(\"line\", { x1: x1, y1: y1, x2: x2, y2: y2 })\n    this.svg.appendChild(line)\n\n    return line\n  },\n  rect: function (width, height) {\n    var rect = $(\"rect\", { width: width, height: height })\n    this.svg.appendChild(rect)\n\n    return rect\n  },\n  text: function (str, font) {\n    var text = $(\"text\")\n    text.style.font = font\n    text.textContent = str\n    this.svg.appendChild(text)\n    return text\n  },\n  circle: function (r) {\n    var circle = $(\"circle\", { r: r })\n    this.svg.appendChild(circle)\n    return circle\n  },\n  //   image   group\n  path: function (d) {\n\n    var path = $(\"path\", { d: d })\n    path.to = _Sving.pathTo\n    this.svg.appendChild(path)\n    return path\n  },\n  ellipse: function (rx, ry) {\n\n    var ellipse = $(\"ellipse\", { rx: rx, ry: ry })\n    this.svg.appendChild(ellipse)\n    return ellipse\n  },\n  image: function (imgOrSrc) {\n    if (typeof imgOrSrc === \"string\") {\n      var image = $(\"image\", { \"xlink:href\": imgOrSrc })\n      var tempImage = new Image()\n      tempImage.onload = function () {\n        image.attr({ width: tempImage.width, height: tempImage.height })\n        tempImage = null\n      }\n      tempImage.src = imgOrSrc\n    } else {\n      var image = $(\"image\", { \"xlink:href\": imgOrSrc, width: imgOrSrc.width, height: imgOrSrc.height })\n\n    }\n    this.svg.appendChild(image)\n    return image\n\n\n  },\n  group: function () {\n    var group = $(\"g\")\n    this.svg.appendChild(group)\n    var i = 0, len = arguments.length\n    for (; i < len; i++) {\n      group.appendChild(arguments[i])\n    }\n    group.add = function (child) {\n      group.appendChild(child)\n    }\n    group.remove = function (child) {\n      group.removeChild(child)\n    }\n    return group\n  },\n  remove: function (child) {\n    this.svg.removeChild(child)\n  }\n}\n\nvar sving = function (selector, width, height) {\n\n  return new _Sving(selector, width, height)\n}\n\n\nsving.Stage = Stage\nsving.Text = Text\n\nexport default sving\n"]}